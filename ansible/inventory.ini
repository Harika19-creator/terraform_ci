#!/usr/bin/env python3

def main():
    with open("frontend_ip.txt") as f:
        frontend_ip = f.read().strip()
    with open("backend_ip.txt") as f:
        backend_ip = f.read().strip()

    # Create the inventory file in INI format
    with open("inventory.ini", "w") as f:
        f.write("[frontend]\n")
        f.write(f"{frontend_ip}\n\n")

        f.write("[backend]\n")
        f.write(f"{backend_ip}\n\n")

        # Hostvars section (for any additional variables)
        f.write("[_meta]\n")
        f.write(f"hostvars = {{\n")
        f.write(f"    \"{frontend_ip}\": {{\"ansible_user\": \"ec2-user\"}},\n")
        f.write(f"    \"{backend_ip}\": {{\"ansible_user\": \"ubuntu\"}}\n")
        f.write(f"}}\n")

    print("Inventory generated as inventory.ini.")

if __name__ == "__main__":
    main()
